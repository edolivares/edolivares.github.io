const EMAILJS_CONFIG={PUBLIC_KEY:"LjlcASGPwe_kU_hAJ",SERVICE_ID:"service_bavqy7r",TEMPLATE_ID:"template_4wmv00q"};function getEmailJSConfig(){return EMAILJS_CONFIG}function initSmoothScrolling(){document.querySelectorAll("a.page-scroll").forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();const t=this.getAttribute("href"),n=document.querySelector(t);if(n){const e=n.offsetTop-50;"scrollBehavior"in document.documentElement.style?window.scrollTo({top:e,behavior:"smooth"}):smoothScrollPolyfill(e)}})})}function smoothScrollPolyfill(e){const t=window.pageYOffset,n=e-t;let o=null;requestAnimationFrame(function e(i){null===o&&(o=i);const a=i-o,r=(c=t,l=n,d=1250,0===(s=a)?c:s===d?c+l:(s/=d/2)<1?l/2*Math.pow(2,10*(s-1))+c:l/2*(2-Math.pow(2,-10*--s))+c);var s,c,l,d;window.scrollTo(0,r),a<1250&&requestAnimationFrame(e)})}function initScrollspy(){const e=document.querySelector("header"),t=document.querySelectorAll("section[id]"),n=(document.querySelectorAll('.nav.navbar-nav a[href^="#"]'),[]);function o(){const e=window.scrollY+150;let t=null;for(let o=n.length-1;o>=0;o--){const i=n[o];if(e>=i.top){t=i;break}}if(t){document.querySelectorAll(".nav.navbar-nav > li").forEach(e=>{e.classList.remove("active")});const e=document.querySelector(`.nav.navbar-nav a[href="#${t.id}"]`);if(e){const t=e.closest("li");t&&t.classList.add("active")}}}e&&n.push({element:e,id:"page-top",top:0,height:e.offsetHeight}),t.forEach(e=>{n.push({element:e,id:e.getAttribute("id"),top:e.offsetTop,height:e.offsetHeight})}),n.forEach(e=>{});let i=!1;window.addEventListener("scroll",function(){i=!1,i||(requestAnimationFrame(o),i=!0)},{passive:!0}),setTimeout(o,100)}function initResponsiveNavigation(){const e=document.querySelector(".navbar-collapse"),t=document.querySelector(".navbar-toggle");if(e&&t){e.querySelectorAll("a").forEach(e=>{e.addEventListener("click",function(){!1===t.classList.contains("collapsed")&&t.click()})})}}function initAffixNavigation(){const e=document.getElementById("mainNav");if(e){function t(){window.scrollY>100?e.classList.add("affix"):e.classList.remove("affix")}window.addEventListener("scroll",t),t()}}function initFormValidation(){const e=document.getElementById("contactForm"),t=document.getElementById("success");if(e&&t){e.querySelectorAll("[required]").forEach(e=>{let t;e.addEventListener("blur",function(){validateField(this)}),e.addEventListener("input",function(){clearTimeout(t),clearFieldError(this),t=setTimeout(()=>{""!==this.value.trim()&&validateField(this)},500)}),e.addEventListener("keypress",function(e){"Enter"===e.key&&validateField(this)})}),e.addEventListener("submit",function(e){e.preventDefault(),validateForm()&&submitForm()});e.querySelectorAll("input, textarea").forEach(e=>{e.addEventListener("focus",function(){clearSuccessMessage()})});const t=document.getElementById("phone");if(t){let e;t.addEventListener("input",function(){clearTimeout(e),clearFieldError(this),e=setTimeout(()=>{""!==this.value.trim()&&validateField(this)},500)}),t.addEventListener("blur",function(){""!==this.value.trim()&&validateField(this)})}const n=document.getElementById("message");if(n){const e=n.parentNode.querySelectorAll(".char-counter");e.length>1&&e.forEach((e,t)=>{t>0&&e.remove()});let t=n.parentNode.querySelector(".char-counter");t||(t=document.createElement("div"),t.className="char-counter small mt-1",t.style.fontSize="12px",t.style.color="#6c757d",n.parentNode.appendChild(t)),n.addEventListener("input",function(){const e=this.value.length,n=1e3,o=n-e;o<0?(t.textContent=`Excediste el límite por ${Math.abs(o)} caracteres`,t.className="char-counter small mt-1",t.style.color="#dc3545"):o<=100?(t.textContent=`${e}/1000 caracteres (${o} restantes)`,t.className="char-counter small mt-1",t.style.color="#ffc107"):(t.textContent=`${e}/1000 caracteres`,t.className="char-counter small mt-1",t.style.color="#d9d9d9")}),n.addEventListener("blur",function(){this.value.length>1e3&&showFieldError(this,"El mensaje no puede exceder 1000 caracteres.")})}}}function validateField(e){const t=e.value.trim();let n=!0,o="";switch(e.getAttribute("name")){case"name":const i=/^[a-zA-ZáéíóúÁÉÍÓÚñÑ\s'-]{2,50}$/;t.length<2?(n=!1,o="El nombre debe tener al menos 2 caracteres."):t.length>50?(n=!1,o="El nombre no puede exceder 50 caracteres."):i.test(t)||(n=!1,o="El nombre solo puede contener letras, espacios y guiones.");break;case"email":/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/.test(t)?t.length>100&&(n=!1,o="El email no puede exceder 100 caracteres."):(n=!1,o="Por favor ingrese un email válido (ejemplo: usuario@dominio.com).");break;case"phone":if(""!==t){/^[\+]?[0-9\s\-\(\)]{7,20}$/.test(t)?t.length<7?(n=!1,o="El teléfono debe tener al menos 7 dígitos."):t.length>20&&(n=!1,o="El teléfono no puede exceder 20 caracteres."):(n=!1,o="El teléfono debe contener solo números, espacios, guiones y paréntesis.")}break;case"message":t.length<10?(n=!1,o="El mensaje debe tener al menos 10 caracteres."):t.length>1e3?(n=!1,o="El mensaje no puede exceder 1000 caracteres."):t.trim().split(" ").length<3&&(n=!1,o="El mensaje debe contener al menos 3 palabras.");break;default:e.hasAttribute("required")&&""===t?(n=!1,o="Este campo es requerido."):t.length<2&&(n=!1,o="Este campo debe tener al menos 2 caracteres.")}return e.hasAttribute("required")&&""===t&&(n=!1,o="Este campo es requerido."),n?clearFieldError(e):showFieldError(e,o),n}function validateForm(){const e=document.querySelectorAll("#contactForm [required]");let t=!0;return e.forEach(e=>{validateField(e)||(t=!1)}),t}function showFieldError(e,t){clearFieldError(e);const n=e.parentNode.querySelector(".help-block");n&&(n.textContent=t,n.classList.add("text-danger")),e.classList.add("is-invalid")}function clearFieldError(e){const t=e.parentNode.querySelector(".help-block");t&&(t.textContent="",t.classList.remove("text-danger")),e.classList.remove("is-invalid")}function clearSuccessMessage(){const e=document.getElementById("success");e&&(e.innerHTML="")}function submitForm(){if(window.formSubmitting)return;window.formSubmitting=!0;const e=document.getElementById("contactForm"),t=document.getElementById("success"),n=document.getElementById("name"),o=document.getElementById("email"),i=document.getElementById("phone"),a=document.getElementById("message"),r=document.getElementById("sendMessageButton");if(!(e&&t&&n&&o&&i&&a&&r))return void(window.formSubmitting=!1);new FormData(e);const s=n.value,c=o.value,l=i.value,d=a.value;if(t&&(t.innerHTML='<div class="alert alert-info">Verificando seguridad...</div>'),"undefined"==typeof grecaptcha)return void(t.innerHTML='<div class="alert alert-danger">Error: reCAPTCHA no está disponible. Por favor, recarga la página.</div>');const u=grecaptcha.getResponse();if(!u)return t&&(t.innerHTML='<div class="alert alert-danger">Por favor, completa la verificación reCAPTCHA antes de enviar el mensaje.</div>'),void(window.formSubmitting=!1);t&&(t.innerHTML='<div class="alert alert-info">Enviando mensaje...</div>');const m=r.innerHTML;r.disabled=!0,r.innerHTML='<i class="fas fa-spinner fa-spin"></i> Enviando...';const f=getEmailJSConfig();if("undefined"==typeof emailjs)return void showErrorMessage();const v=new Date,g={from_name:s,from_email:c,from_phone:l,message:d,to_name:"Eduardo Olivares",date:v.toLocaleDateString("es-ES",{year:"numeric",month:"long",day:"numeric"}),time:v.toLocaleTimeString("es-ES",{hour:"2-digit",minute:"2-digit",second:"2-digit"}),"g-recaptcha-response":u};emailjs.send(f.SERVICE_ID,f.TEMPLATE_ID,g).then(function(e){showSuccessMessage(),document.getElementById("contactForm").reset(),grecaptcha.reset(),r.disabled=!1,r.innerHTML=m,window.formSubmitting=!1},function(e){showErrorMessage(),document.getElementById("contactForm").reset(),grecaptcha.reset(),r.disabled=!1,r.innerHTML=m,window.formSubmitting=!1})}function showSuccessMessage(){document.getElementById("success").innerHTML='\n        <div class="alert alert-success">\n            <button type="button" class="btn-close" data-bs-dismiss="alert" aria-hidden="true"></button>\n            <strong>Tu mensaje ha sido enviado.</strong>\n        </div>\n    '}function showErrorMessage(){const e=document.getElementById("success"),t=document.getElementById("name").value.split(" ")[0]||"usuario";e.innerHTML=`\n        <div class="alert alert-danger">\n            <button type="button" class="btn-close" data-bs-dismiss="alert" aria-hidden="true"></button>\n            <strong>Lo siento ${t}, al parecer el servidor de correos no está funcionando. Por favor vuelve a intentarlo luego!</strong>\n        </div>\n    `}function initVanillaFunctions(){"loading"===document.readyState?document.addEventListener("DOMContentLoaded",initAll):initAll()}function initAll(){initSmoothScrolling(),initScrollspy(),initResponsiveNavigation(),initAffixNavigation(),initFormValidation()}function updateCopyrightYear(){const e=document.getElementById("currentYear");if(e){const t=(new Date).getFullYear();e.textContent=t,e.setAttribute("datetime",t)}}async function loadModules(){try{await import("./emailjs-config.js"),await import("./vanilla-functions.js"),await import("./footer-functions.js"),await import("./header-behavior.js")}catch(e){}}function initializeApp(){}"undefined"!=typeof emailjs&&emailjs.init(EMAILJS_CONFIG.PUBLIC_KEY),window.getEmailJSConfig=getEmailJSConfig,initVanillaFunctions(),document.addEventListener("DOMContentLoaded",function(){const e=document.getElementById("mainNav"),t=(document.querySelector(".navbar-brand"),document.querySelector(".navbar-collapse"));function n(){window.scrollY>50?(e.classList.remove("affix-top"),e.classList.add("affix")):(e.classList.remove("affix"),e.classList.add("affix-top"))}document.querySelectorAll(".page-scroll").forEach(t=>{t.addEventListener("click",function(t){t.preventDefault();const n=this.getAttribute("href"),o=document.querySelector(n);if(o){const t=e.offsetHeight,n=o.offsetTop-t;window.scrollTo({top:n,behavior:"smooth"})}})}),window.addEventListener("scroll",n),n();const o=document.querySelectorAll(".navbar-nav a"),i=document.querySelector(".navbar-toggle");o.forEach(e=>{e.addEventListener("click",()=>{window.innerWidth<768&&t.classList.contains("show")&&i.click()})});const a=document.querySelectorAll("section[id]"),r=document.querySelectorAll(".navbar-nav a");function s(){const t=window.scrollY+e.offsetHeight+100;r.forEach(e=>{e.classList.remove("active");const t=e.closest("li");t&&t.classList.remove("active")}),a.forEach(e=>{const n=e.offsetTop,o=e.offsetHeight,i=e.getAttribute("id");if(t>=n&&t<n+o){const e=document.querySelector(`.navbar-nav a[href="#${i}"]`);if(e){e.classList.add("active");const t=e.closest("li");t&&t.classList.add("active")}}})}window.addEventListener("scroll",s),s()}),document.addEventListener("DOMContentLoaded",function(){updateCopyrightYear()}),"undefined"!=typeof module&&module.exports&&(module.exports={updateCopyrightYear:updateCopyrightYear}),document.addEventListener("DOMContentLoaded",function(){loadModules().then(()=>{initializeApp()})});